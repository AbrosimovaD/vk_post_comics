# Публикация комиксов
При каждом запуске скрипта скачивается рандомный комикс с сайта [xkcd](https://xkcd.com/) и публикуется в VK сообществе. Подпись к посту берется из комментария к комиксу. 
![image](https://github.com/AbrosimovaD/vk_post_comics/assets/114830550/2954537d-8b20-45b2-9873-de0f58c75c91)

## Окружение
* Python 3

## Зависимости
Все необходимые библиотеки находятся в файле *requirements.txt*.

Если файл находится в той же директории, что и файл скрипта, то для установки воспользуйтесь командой 

  ```  pip install -r requirements.txt ```

Если же в другой папке - необходимо дополнительно прописать путь до файла:

  ``` pip install -r /path/to/requirements.txt ```

## Переменные окружения
В данном скрипте для выполнения запросов используются переменные окружения:

* ```VK_ACCESS_TOKEN=*Access key для VK API* ```
* ```VK_GROUP_ID=*ID группы, куда будут поститься комиксы*```

### Как получить
1. Создайте от своего пользователя Вконтакте сообщество, где будете публиковать комиксы. При успехе оно отобразиться у вас во вкладке **Сообщества - > Управление**.
1. Для постинга на стену нужен ключ доступа пользователя. Чтобы его получить, ВКонтакте хочет “приложение”. Создайте его в разделе **Мои приложения** на [странице Вконтакте для разработчиков](https://vk.com/dev).

   В качестве типа приложения следует указать ```standalone``` — это подходящий тип для приложений, которые просто запускаются на компьютере.

   В разделе **Редактировать -> Настройки** для созданного приложения отображается его ```client_id```, который будет использован далее.
   Также нужно включить свое приложение.
   ![image](https://github.com/AbrosimovaD/vk_post_comics/assets/114830550/1cfbcf26-7221-45c7-a740-16965878e4c7)

3. Затем, используя [процедуру Implicit Flow](https://dev.vk.com/ru/api/access-token/implicit-flow-user?ref=old_portal), получите ```access token```, указав в параметре **client_id** ```client_id``` с предыдущего шага, в параметре **scope** следующие права: ```photos```, ```groups```, ```wall``` и ```offline```: ```scope=photos,groups,wall```

   Пример запроса:
   
   ```https://oauth.vk.com/authorize?client_id=**id вашего приложения полученного в предыдущем шаге**&display=page&redirect_uri=https://oauth.vk.com/blank.html&scope=scope=photos,groups,wall&response_type=token&v=5.131&state=12345```

   Вас переадресуют на окно доступа, где нужно дать разрешение.
   ![image](https://github.com/AbrosimovaD/vk_post_comics/assets/114830550/e1ecf71e-aebb-4bd7-8e33-17d7657b9037)

   После чего в открывшейся ссылке будет искомый ```access_token```
   ![image](https://github.com/AbrosimovaD/vk_post_comics/assets/114830550/e5be38e2-0634-4fed-9657-d14ae4d70a2a)

1. Cоздайте переменную окружения на своём компьютере: создайте специальный файл ```.env``` рядом с ```main.py```. Поместите в переменную ```VK_ACCESS_TOKEN``` полученный access token

        ```VK_ACCESS_TOKEN=*Access key для VK API*```
1. Узнать ```group_id``` вашего сообщества можно через [сервис](https://regvk.com/id/)
2. Поместите в переменную ```VK_GROUP_ID``` полученный group_id

        ```VK_GROUP_ID=*ID группы, куда будут поститься комиксы*```

## Запуск скрипта
После установки неоходимых библиотек и создания переменных окружения запустить скрипт можно обычным способом. Например, через командную строку:

```  python3 vk_post_comics.py  ```

## Цель проекта

Код написан в образовательных целях на онлайн-курсе [dvmn.org](https://dvmn.org/).
